"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[7231],{8537:(s,e,a)=>{a.d(e,{A:()=>c});var i=a(9379),n=a(5043),r=a(9981),t=a(7488),l=a(184),d=a(579);const c=()=>{const[s,e]=(0,n.useState)({master:!1,franchising:!1,marketing:!1,leasing:!1,admin:!1}),[a,c]=(0,n.useState)(!1),[o,m]=(0,n.useState)("Guest"),[u,h]=(0,n.useState)(""),x=(0,r.Zp)();(0,n.useEffect)(()=>{const s=localStorage.getItem("adminName"),e=localStorage.getItem("adminEmail");s&&m(s),e&&h(e)},[]);const j=s=>{e(e=>(0,i.A)((0,i.A)({},e),{},{[s]:!e[s]}))};return(0,d.jsxs)("aside",{className:"snbs-sidebar ".concat(a?"collapsed":""),children:[(0,d.jsxs)("div",{className:"snbs-sidebar-header",children:[(0,d.jsx)("div",{className:"snbs-logo",children:!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{children:"FRANMAX INDIA"}),(0,d.jsxs)("p",{className:"snbs-role",children:["Welcome, ",o]}),u&&(0,d.jsx)("p",{className:"snbs-email",children:u})]})}),(0,d.jsx)("button",{className:"snbs-toggle-btn",onClick:()=>c(!a),children:a?(0,d.jsx)(l.OXb,{}):(0,d.jsx)(l.QCr,{})})]}),(0,d.jsxs)("nav",{className:"snbs-menu",children:[(0,d.jsxs)("div",{className:"snbs-section",children:[(0,d.jsxs)("div",{className:"snbs-section-header",onClick:()=>j("franchising"),children:[(0,d.jsx)("span",{children:"FRANCHISING"}),s.franchising?(0,d.jsx)(l.Vr3,{}):(0,d.jsx)(l.X6T,{})]}),s.franchising&&!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.N_,{to:"/admin/brand-list",className:"snbs-link",children:[(0,d.jsx)(l.ymh,{})," Brand"]}),(0,d.jsxs)(r.N_,{to:"/admin/investors",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{})," Investor"]}),(0,d.jsxs)(r.N_,{to:"/admin/leads",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"Generic Inquiries"]}),(0,d.jsxs)(r.N_,{to:"/admin/brand-inquiries",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"Brand Specific Inquiries"]}),(0,d.jsxs)(r.N_,{to:"/admin/partner-inquiries",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"Partner Inquiries"]}),(0,d.jsxs)(r.N_,{to:"/admin/newsletter",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"Newsletter"]}),(0,d.jsxs)(r.N_,{to:"/admin/faq",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"FAQ"]}),(0,d.jsxs)(r.N_,{to:"/admin/event",className:"snbs-link",children:[(0,d.jsx)(l.p7b,{}),"Event"]})]})]}),(0,d.jsxs)("div",{className:"snbs-section",children:[(0,d.jsxs)("div",{className:"snbs-section-header",onClick:()=>j("marketing"),children:[(0,d.jsx)("span",{children:"MARKETING"}),s.marketing?(0,d.jsx)(l.Vr3,{}):(0,d.jsx)(l.X6T,{})]}),s.marketing&&!a&&(0,d.jsxs)(r.N_,{to:"/admin/marketing-inquiries",className:"snbs-link",children:[(0,d.jsx)(l.sdT,{})," Marketing"]})]}),(0,d.jsxs)("div",{className:"snbs-section",children:[(0,d.jsxs)("div",{className:"snbs-section-header",onClick:()=>j("leasing"),children:[(0,d.jsx)("span",{children:"LEASING"}),s.leasing?(0,d.jsx)(l.Vr3,{}):(0,d.jsx)(l.X6T,{})]}),s.leasing&&!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.N_,{to:"#",className:"snbs-link",children:[(0,d.jsx)(l.zsO,{})," Buy Lease Property inquiries"]}),(0,d.jsxs)(r.N_,{to:"/admin/lease-properties",className:"snbs-link",children:[(0,d.jsx)(l.zsO,{})," Lease Property inquiries"]}),(0,d.jsxs)(r.N_,{to:"#",className:"snbs-link",children:[(0,d.jsx)(l.zsO,{})," Sell Property"]}),(0,d.jsxs)(r.N_,{to:"/admin/buy-business-inquiries",className:"snbs-link",children:[(0,d.jsx)(l.zsO,{}),"Buy Business Inquiry"]}),(0,d.jsxs)(r.N_,{to:"/admin/sell-business-inquiries",className:"snbs-link",children:[(0,d.jsx)(l.zsO,{})," Sell Business"]})]})]}),(0,d.jsxs)("div",{className:"snbs-section",children:[(0,d.jsxs)("div",{className:"snbs-section-header",onClick:()=>j("admin"),children:[(0,d.jsx)("span",{children:"ADMIN"}),s.admin?(0,d.jsx)(l.Vr3,{}):(0,d.jsx)(l.X6T,{})]}),s.admin&&!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.N_,{to:"/user-list",className:"snbs-link",children:[(0,d.jsx)(l.YXz,{})," Users"]}),(0,d.jsxs)(r.N_,{to:"#",onClick:()=>{localStorage.removeItem("adminId"),localStorage.removeItem("adminName"),localStorage.removeItem("adminEmail"),t.oR.info("You have been logged out."),x("/admin/login")},className:"snbs-link",children:[(0,d.jsx)(l.x7F,{})," Logout"]})]})]})]})]})}},9612:(s,e,a)=>{a.r(e),a.d(e,{default:()=>m});var i=a(9379),n=a(5043),r=a(7488),t=(a(2342),a(184)),l=a(3862),d=a(8537),c=a(579);function o(s){let{isOpen:e,onClose:a,onSave:t}=s;const[d,o]=(0,n.useState)({name:"",email:"",password:"",status:"active",permissions:[]}),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e&&(o({name:"",email:"",password:"",status:"active",permissions:[]}),x(!1))},[e]);const j=s=>{const{name:e,value:a}=s.target;o(s=>(0,i.A)((0,i.A)({},s),{},{[e]:a}))},p=s=>{const{value:e,checked:a}=s.target;o(s=>{const n=s.permissions;return a?(0,i.A)((0,i.A)({},s),{},{permissions:[...n,e]}):(0,i.A)((0,i.A)({},s),{},{permissions:n.filter(s=>s!==e)})})};return e?(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"add-user-modal",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h3",{children:"Add New User"}),(0,c.jsx)("button",{className:"close-btn",onClick:a,disabled:m,children:"\xd7"})]}),(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Name"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:j,placeholder:"Enter user's name",required:!0,disabled:m})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:j,placeholder:"Enter user's email",required:!0,disabled:m})]}),(0,c.jsxs)("div",{className:"form-group password-group",children:[" ",(0,c.jsx)("label",{htmlFor:"password",children:"Password"}),(0,c.jsxs)("div",{className:"password-input-wrapper",children:[(0,c.jsx)("input",{type:h?"text":"password",id:"password",name:"password",value:d.password,onChange:j,placeholder:"Enter password",required:!0,disabled:m}),(0,c.jsx)("button",{type:"button",className:"password-toggle-btn",onClick:()=>{x(!h)},disabled:m,children:h?(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-eye-off",children:[(0,c.jsx)("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),(0,c.jsx)("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),(0,c.jsx)("path",{d:"M6.61 6.61A13.52 13.52 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),(0,c.jsx)("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}):(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-eye",children:[(0,c.jsx)("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),(0,c.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"status",children:"Status"}),(0,c.jsxs)("select",{id:"status",name:"status",value:d.status,onChange:j,required:!0,disabled:m,children:[(0,c.jsx)("option",{value:"active",children:"Active"}),(0,c.jsx)("option",{value:"not active",children:"Not Active"})]})]}),(0,c.jsxs)("div",{className:"form-group permissions-group",children:[(0,c.jsx)("label",{children:"Permissions"}),(0,c.jsx)("div",{className:"permissions-grid",children:["view_dashboard","view_users","add_users","edit_users","view_brands","add_brands","edit_brands","view_investors","add_investors","view_leads","view_marketing_inquiries","view_buy_business_inquiries","view_brand_inquiries","view_brand_dashboard","view_brand_profile","upload_brand_docs","view_sell_business_inquiries","view_lease_properties","view_partner_inquiries","view_newsletter","view_faq",,"view_events"].map(s=>(0,c.jsxs)("div",{className:"permission-item",children:[(0,c.jsx)("input",{type:"checkbox",id:"perm-".concat(s),name:"permissions",value:s,checked:d.permissions.includes(s),onChange:p,disabled:m}),(0,c.jsx)("label",{htmlFor:"perm-".concat(s),children:s.replace(/_/g," ")})]},s))})]})]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{className:"save-btn",onClick:async()=>{const{name:s,email:e,password:i,status:n,permissions:c}=d;if(!s||!e||!i||!n)return void r.oR.error("All fields (except permissions) are required.");if(m)return;u(!0);const o={name:s,email:e,password:i,status:n,permissions:c};try{const s=await fetch((0,l.e)("add-user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),e=await s.text(),i=JSON.parse(e);i.success?(r.oR.success(i.message),t(),a()):r.oR.error(i.message||"Failed to add user.")}catch(h){r.oR.error("API error adding user: "+h.message),console.error("AddUserModal: Error during API call:",h)}finally{u(!1)}},disabled:m,children:m?"Saving...":"Save User"}),(0,c.jsx)("button",{className:"cancel-btn",onClick:a,disabled:m,children:"Cancel"})]})]})}):null}function m(){const[s,e]=(0,n.useState)([]),[a,m]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null),[x,j]=(0,n.useState)(!1),[p,b]=(0,n.useState)({name:"",email:"",password:"",status:"active"}),[N,g]=(0,n.useState)(null),[v,w]=(0,n.useState)(""),[k,f]=(0,n.useState)(""),[_,y]=(0,n.useState)(""),C=(0,n.useCallback)(async()=>{m(!0),h(null);try{const s=await fetch((0,l.e)("get-users.php"));if(!s.ok){const e=await s.json();throw new Error(e.message||"HTTP error! status: ".concat(s.status))}const a=await s.json();a.success?(e(a.data),r.oR.success("Users loaded successfully!")):(r.oR.error(a.message||"Failed to fetch users."),h(a.message||"Failed to fetch users."))}catch(s){r.oR.error("Network error or API issue: "+s.message),h("Network error or API issue: "+s.message),console.error("Error fetching users:",s)}finally{m(!1)}},[]);(0,n.useEffect)(()=>{C()},[C]);const A=()=>{g(null),w(""),f(""),y("")};return(0,c.jsxs)("div",{className:"dashboard-layout",children:[(0,c.jsx)(d.A,{}),(0,c.jsxs)("div",{className:"main-content user-list-container",children:[(0,c.jsx)(r.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,c.jsxs)("div",{className:"user-list-header",children:[(0,c.jsx)("h2",{className:"user-list-title",children:"User List"}),(0,c.jsxs)("button",{className:"add-user-btn",onClick:()=>j(!0),children:[(0,c.jsx)(t.OiG,{})," Add User"]})]}),a?(0,c.jsx)("div",{className:"status-message loading-message",children:"Loading users..."}):u?(0,c.jsxs)("div",{className:"status-message error-message",children:["Error: ",u]}):0===s.length?(0,c.jsx)("div",{className:"status-message no-data-message",children:"No users found."}):(0,c.jsx)("div",{className:"table-wrapper",children:(0,c.jsxs)("table",{className:"user-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"ID"}),(0,c.jsxs)("th",{children:[(0,c.jsx)(t.maD,{className:"table-icon"})," Email"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)(t.NBi,{className:"table-icon"})," Name"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)(t.JhU,{className:"table-icon"})," Password"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)(t.A7C,{className:"table-icon"})," Status"]}),(0,c.jsxs)("th",{children:[(0,c.jsx)(t.Zu,{className:"table-icon"})," Created At"]}),(0,c.jsx)("th",{children:"Actions"})," "]})}),(0,c.jsx)("tbody",{children:s.map(s=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:s.id}),(0,c.jsx)("td",{children:N===s.id?(0,c.jsx)("input",{type:"email",value:k,onChange:s=>f(s.target.value),className:"editable-input"}):s.email}),(0,c.jsx)("td",{children:N===s.id?(0,c.jsx)("input",{type:"text",value:v,onChange:s=>w(s.target.value),className:"editable-input"}):s.name}),(0,c.jsx)("td",{children:"********"})," ",(0,c.jsx)("td",{children:N===s.id?(0,c.jsxs)("select",{value:_,onChange:s=>y(s.target.value),className:"editable-select",children:[(0,c.jsx)("option",{value:"active",children:"Active"}),(0,c.jsx)("option",{value:"not active",children:"Not Active"})]}):(0,c.jsx)("span",{className:"status-badge ".concat("active"===s.status?"status-active":"status-inactive"),children:s.status})}),(0,c.jsx)("td",{children:s.created_at||"N/A"}),(0,c.jsx)("td",{children:N===s.id?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"action-btn save-btn",onClick:()=>(async s=>{if(v&&k&&_)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k))try{const e=await fetch((0,l.e)("update-user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,name:v,email:k,status:_})}),a=await e.json();a.success?(r.oR.success(a.message),C(),A()):r.oR.error(a.message||"Failed to update user.")}catch(e){r.oR.error("API error updating user: "+e.message),console.error("Error updating user:",e)}else r.oR.error("Please enter a valid email address.");else r.oR.error("Name, Email, and Status cannot be empty.")})(s.id),title:"Save Changes",children:(0,c.jsx)(t.dIn,{})}),(0,c.jsx)("button",{className:"action-btn cancel-btn",onClick:A,title:"Cancel Edit",children:(0,c.jsx)(t.QCr,{})})]}):(0,c.jsx)("button",{className:"action-btn edit-btn",onClick:()=>(s=>{g(s.id),w(s.name),f(s.email),y(s.status)})(s),title:"Edit User",children:(0,c.jsx)(t.uO9,{})})})]},s.id))})]})}),x&&(0,c.jsx)(o,{isOpen:x,onClose:()=>j(!1),onSave:async()=>{const{name:s,email:e,password:a,status:i}=p;if(s&&e&&a&&i)try{const s=await fetch((0,l.e)("add-user.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),e=await s.json();e.success?(r.oR.success(e.message),j(!1),b({name:"",email:"",password:"",status:"active"}),C()):r.oR.error(e.message||"Failed to add user.")}catch(n){r.oR.error("API error adding user: "+n.message),console.error("Error adding user:",n)}else r.oR.error("All fields are required.")},form:p,handleFormChange:s=>{b((0,i.A)((0,i.A)({},p),{},{[s.target.name]:s.target.value}))}})]})]})}}}]);
//# sourceMappingURL=7231.16ad1f70.chunk.js.map