"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[3373],{3373:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var r=a(9379),l=a(5043),o=a(9981),i=a(7281),n=a(7488),c=(a(2342),a(3862)),d=a(4030),t=a(579);const u=[{key:"logo",label:"Logo"},{key:"primaryImage",label:"Primary Image"},{key:"listingImage",label:"Listing Page Image"},{key:"detailImage1",label:"Detail Page Image 1"},{key:"detailImage2",label:"Detail Page Image 2"}],p=()=>{const[e,s]=(0,l.useState)({}),[a,p]=(0,l.useState)({}),[h,m]=(0,l.useState)(!1),[g,j]=(0,l.useState)(null),x=(0,o.Zp)();(0,l.useEffect)(()=>{let e=null;try{const s=localStorage.getItem("userSession");if(s){const a=JSON.parse(s);a&&a.id&&(e=a.id)}}catch(s){console.error("Failed to parse user session:",s)}e?j(e):(console.error("No valid brand ID found. Redirecting to login."),x("/"))},[x]),(0,l.useEffect)(()=>{(async()=>{if(g)try{const e=await fetch((0,c.e)("get-docs.php?brand_id=".concat(g))),s=await e.json();s.success?p(s.images||{}):n.oR.error(s.message||"Failed to load images.")}catch(e){n.oR.error("Error fetching uploaded images."),console.error("Error fetching uploaded images:",e)}})()},[g]);const f=(e,s)=>e?URL.createObjectURL(e):a[s]?a[s]:null;return g?(0,t.jsxs)("div",{className:"upload-layout",children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"upload-wrapper",children:[(0,t.jsx)(d.A,{})," ",(0,t.jsx)(n.N9,{}),h&&(0,t.jsx)("div",{className:"upload-overlay",children:(0,t.jsx)("div",{className:"upload-loader",children:"Uploading..."})}),(0,t.jsx)("h2",{children:"Upload Brand Images"}),(0,t.jsxs)("form",{className:"upload-form",onSubmit:async l=>{l.preventDefault();const o=u.filter(s=>{let{key:r}=s;return!e[r]&&!a[r]});if(o.length>0)return void n.oR.error("Missing image: ".concat(o[0].label));const i=new FormData;if(u.forEach(s=>{let{key:a}=s;e[a]&&i.append(a,e[a])}),g){i.append("brand_id",g);try{m(!0);const e=await fetch((0,c.e)("upload-docs.php"),{method:"POST",body:i}),a=await e.json();m(!1),a.success?(n.oR.success(a.message||"Files uploaded successfully!"),s({}),a.files&&p(e=>(0,r.A)((0,r.A)({},e),a.files))):a.errors?a.errors.forEach(e=>{n.oR.error(e)}):n.oR.error(a.message||"Upload failed.")}catch(d){m(!1),n.oR.error("Error uploading files.")}}else n.oR.error("Brand ID not found. Please log in again.")},encType:"multipart/form-data",children:[(0,t.jsx)("div",{className:"upload-grid",children:u.map(a=>{let{key:l,label:o}=a;return(0,t.jsxs)("div",{className:"upload-slot",children:[(0,t.jsx)("label",{children:o}),(0,t.jsxs)("div",{className:"upload-box",children:[f(e[l],l)?(0,t.jsx)("img",{src:(0,c.V)(f(e[l],l)),alt:"".concat(o," Preview"),className:"upload-thumbnail"}):(0,t.jsx)("span",{className:"upload-placeholder",children:"Choose file"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>((e,a)=>{const l=e.target.files[0];l&&s(e=>(0,r.A)((0,r.A)({},e),{},{[a]:l}))})(e,l)})]})]},l)})}),(0,t.jsx)("button",{type:"submit",disabled:h,children:h?"Uploading...":"Upload Documents"})]})]})]}):(0,t.jsxs)("div",{className:"upload-layout",children:[(0,t.jsx)(i.A,{}),(0,t.jsx)("div",{className:"upload-wrapper",children:(0,t.jsx)("p",{children:"Redirecting to login..."})})]})}},4030:(e,s,a)=>{a.d(s,{A:()=>i});var r=a(5043),l=(a(9840),a(9981)),o=a(579);const i=()=>{const[e,s]=(0,r.useState)("Brand"),a=(0,l.Zp)();return(0,r.useEffect)(()=>{try{const e=localStorage.getItem("userSession");if(e){const a=JSON.parse(e);s(a.name||"Brand")}else a("/")}catch(e){console.error("Failed to retrieve or parse user session:",e)}},[]),(0,o.jsx)("header",{className:"brand-header",children:(0,o.jsxs)("h1",{children:["Welcome, ",e,"!"]})})}},7281:(e,s,a)=>{a.d(s,{A:()=>n});var r=a(5043),l=(a(9840),a(9981)),o=a(184),i=a(579);const n=()=>{const[e,s]=(0,r.useState)(!0);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"brand-sidebar ".concat(e?"open":"collapsed"),children:[(0,i.jsxs)("div",{className:"sidebar-header",children:[e?"Brand CRM":"",(0,i.jsx)("button",{className:"toggle-btn",onClick:()=>{s(!e)},children:e?(0,i.jsx)(o.QCr,{}):(0,i.jsx)(o.OXb,{})})]}),(0,i.jsxs)("ul",{className:"sidebar-menu",children:[(0,i.jsx)("li",{children:(0,i.jsxs)(l.N_,{to:"/brand/dashboard",children:["\ud83c\udfe0 ",e&&"Dashboard"]})}),(0,i.jsx)("li",{children:(0,i.jsxs)(l.N_,{to:"/brand/inquiries",children:["\ud83d\udce8 ",e&&"Inquiries"]})}),(0,i.jsx)("li",{children:(0,i.jsxs)(l.N_,{to:"/brand/upload-docs",children:["\ud83d\udcc1 ",e&&"Upload Docs"]})}),(0,i.jsx)("div",{className:"sidebar-divider"})," ",(0,i.jsx)("li",{children:(0,i.jsxs)(l.N_,{to:"/brand/profile",children:["\ud83d\udc64 ",e&&"Profile"]})}),(0,i.jsx)("li",{children:(0,i.jsxs)(l.N_,{to:"/pricing",children:["\ud83d\udcbc ",e&&"Pricing"]})}),(0,i.jsx)("li",{children:(0,i.jsxs)("a",{href:"#",onClick:()=>{localStorage.clear(),window.location.href="/"},children:["\ud83d\udeaa ",e&&"Logout"]})})]})]})})}},9840:()=>{}}]);
//# sourceMappingURL=3373.24fc1001.chunk.js.map