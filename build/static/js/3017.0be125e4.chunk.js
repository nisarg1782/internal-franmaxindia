"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[3017],{3017:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var c=a(5043),i=(a(9840),a(7281)),r=a(4030),n=a(184),t=a(95),l=a(379),d=a(108),o=a(7869),h=a(4152),x=a(7734),j=a(7757),m=a(2185),u=a(760),b=a(7554),v=a(6992),p=a(9722),N=a(9981),g=a(3862),f=a(579);const k=["#0088FE","#00C49F","#FFBB28","#FF8042","#7B68EE"],y=()=>{const[e,s]=(0,c.useState)(0),[a,y]=(0,c.useState)([]),[q,w]=(0,c.useState)([]),[S,I]=(0,c.useState)({}),[C,F]=(0,c.useState)(null),E=(0,N.Zp)();(0,c.useEffect)(()=>{let e=null;try{const s=localStorage.getItem("userSession");if(s){const a=JSON.parse(s);a&&a.id&&(e=a.id)}}catch(s){console.error("Failed to parse user session:",s)}e?F(e):E("/")},[E]),(0,c.useEffect)(()=>{(async()=>{if(C)try{var e;const a=(await p.A.get((0,g.e)("get_brand_inquiries.php?brand_id=".concat(C)))).data;s(a.total||0);const c=a.statewise.reduce((e,s)=>e+parseInt(s.count),0),i=a.statewise.map(e=>({name:e.state,value:parseInt(e.count),percentage:(e.count/c*100).toFixed(1)}));y(i);const r=a.monthly.map(e=>({month:e.month,enquiries:parseInt(e.count)}));w(r);const n={};null===(e=a.remarkwise)||void 0===e||e.forEach(e=>{n[e.remark]=parseInt(e.count)}),I(n)}catch(a){console.error("Failed to fetch dashboard data:",a)}})()},[C]);const _=e=>{E("/brand/inquiries?remark=".concat(encodeURIComponent(e)))};return C?(0,f.jsxs)("div",{className:"brand-crm-container",children:[(0,f.jsx)(i.A,{}),(0,f.jsxs)("div",{className:"brand-crm-main",children:[(0,f.jsx)(r.A,{}),(0,f.jsxs)("section",{className:"brand-overview",children:[(0,f.jsx)("h2",{children:"Brand Performance Overview"}),(0,f.jsxs)("div",{className:"stats-grid",children:[(0,f.jsxs)("div",{className:"stat-card",children:[(0,f.jsx)("div",{className:"icon-box green",children:(0,f.jsx)(n.YXz,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Total Inquiries"}),(0,f.jsx)("p",{children:e})]})]}),(0,f.jsxs)("div",{className:"stat-card clickable",onClick:()=>_("interested"),children:[(0,f.jsx)("div",{className:"icon-box success",children:(0,f.jsx)(n.gb0,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Interested"}),(0,f.jsx)("p",{children:S.interested||0})]})]}),(0,f.jsxs)("div",{className:"stat-card clickable",onClick:()=>_("not interested"),children:[(0,f.jsx)("div",{className:"icon-box danger",children:(0,f.jsx)(n.b7w,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Not Interested"}),(0,f.jsx)("p",{children:S["not interested"]||0})]})]}),(0,f.jsxs)("div",{className:"stat-card clickable",onClick:()=>_("deal"),children:[(0,f.jsx)("div",{className:"icon-box teal",children:(0,f.jsx)(n.DDN,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Deal"}),(0,f.jsx)("p",{children:S.deal||0})]})]}),(0,f.jsxs)("div",{className:"stat-card clickable",onClick:()=>_("not qualified"),children:[(0,f.jsx)("div",{className:"icon-box gray",children:(0,f.jsx)(n.Rqy,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Not Qualified"}),(0,f.jsx)("p",{children:S["not qualified"]||0})]})]}),(0,f.jsxs)("div",{className:"stat-card clickable",onClick:()=>_("not received"),children:[(0,f.jsx)("div",{className:"icon-box purple",children:(0,f.jsx)(n.L2J,{})}),(0,f.jsxs)("div",{className:"text-box",children:[(0,f.jsx)("h4",{children:"Not Received"}),(0,f.jsx)("p",{children:S["not received"]||0})]})]})]})]}),(0,f.jsxs)("section",{className:"brand-charts",children:[(0,f.jsxs)("h3",{children:["State-wise Enquiries (Total: ",e,")"]}),(0,f.jsx)("div",{className:"chart-container",children:(0,f.jsx)(d.u,{width:"100%",height:300,children:(0,f.jsxs)(v.r,{children:[(0,f.jsx)(h.F,{data:a,cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",dataKey:"value",label:e=>{let{name:s,value:a,percentage:c}=e;return"".concat(s," (").concat(a,") - ").concat(c,"%")},children:a.map((e,s)=>(0,f.jsx)(o.f,{fill:k[s%k.length]},"cell-".concat(s)))}),(0,f.jsx)(l.m,{formatter:(e,s,a)=>["".concat(e," inquiries (").concat(a.payload.percentage,"%)"),"Enquiries"]}),(0,f.jsx)(t.s,{verticalAlign:"bottom",height:36})]})})}),(0,f.jsx)("h3",{style:{marginTop:"40px"},children:"Month-wise Inquiries"}),(0,f.jsx)("div",{className:"chart-container",children:(0,f.jsx)(d.u,{width:"100%",height:300,children:(0,f.jsxs)(b.b,{data:q,children:[(0,f.jsx)(x.d,{strokeDasharray:"3 3"}),(0,f.jsx)(m.W,{dataKey:"month"}),(0,f.jsx)(u.h,{}),(0,f.jsx)(l.m,{formatter:e=>["".concat(e," Inquiries"),"Monthly Total"]}),(0,f.jsx)(t.s,{}),(0,f.jsx)(j.N,{type:"monotone",dataKey:"enquiries",name:"Monthly Inquiries",stroke:"#0088FE",strokeWidth:3,activeDot:{r:6}})]})})})]})]})]}):(0,f.jsx)("div",{children:"Loading dashboard..."})}},4030:(e,s,a)=>{a.d(s,{A:()=>n});var c=a(5043),i=(a(9840),a(9981)),r=a(579);const n=()=>{const[e,s]=(0,c.useState)("Brand"),a=(0,i.Zp)();return(0,c.useEffect)(()=>{try{const e=localStorage.getItem("userSession");if(e){const a=JSON.parse(e);s(a.name||"Brand")}else a("/")}catch(e){console.error("Failed to retrieve or parse user session:",e)}},[]),(0,r.jsx)("header",{className:"brand-header",children:(0,r.jsxs)("h1",{children:["Welcome, ",e,"!"]})})}},7281:(e,s,a)=>{a.d(s,{A:()=>t});var c=a(5043),i=(a(9840),a(9981)),r=a(184),n=a(579);const t=()=>{const[e,s]=(0,c.useState)(!0);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"brand-sidebar ".concat(e?"open":"collapsed"),children:[(0,n.jsxs)("div",{className:"sidebar-header",children:[e?"Brand CRM":"",(0,n.jsx)("button",{className:"toggle-btn",onClick:()=>{s(!e)},children:e?(0,n.jsx)(r.QCr,{}):(0,n.jsx)(r.OXb,{})})]}),(0,n.jsxs)("ul",{className:"sidebar-menu",children:[(0,n.jsx)("li",{children:(0,n.jsxs)(i.N_,{to:"/brand/dashboard",children:["\ud83c\udfe0 ",e&&"Dashboard"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(i.N_,{to:"/brand/inquiries",children:["\ud83d\udce8 ",e&&"Inquiries"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(i.N_,{to:"/brand/upload-docs",children:["\ud83d\udcc1 ",e&&"Upload Docs"]})}),(0,n.jsx)("div",{className:"sidebar-divider"})," ",(0,n.jsx)("li",{children:(0,n.jsxs)(i.N_,{to:"/brand/profile",children:["\ud83d\udc64 ",e&&"Profile"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)(i.N_,{to:"/pricing",children:["\ud83d\udcbc ",e&&"Pricing"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"#",onClick:()=>{localStorage.clear(),window.location.href="/"},children:["\ud83d\udeaa ",e&&"Logout"]})})]})]})})}},9840:()=>{}}]);
//# sourceMappingURL=3017.0be125e4.chunk.js.map